"use strict";(self["webpackChunkanistream"]=self["webpackChunkanistream"]||[]).push([[35],{8054:function(e,i,s){s.d(i,{Z:function(){return I}});var t=s(3396),a=s(7139);const n=e=>((0,t.dD)("data-v-a4634156"),e=e(),(0,t.Cn)(),e),r={class:"container"},o=["src"],d={class:"info"},l={class:"rating"},c={fill:"#ffffff",viewBox:"0 0 64 64",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve","xmlns:serif":"http://www.serif.com/",style:{"fill-rule":"evenodd","clip-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2"},stroke:"#ffffff"},g=n((()=>(0,t._)("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1))),m=n((()=>(0,t._)("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1))),_=n((()=>(0,t._)("g",{id:"SVGRepo_iconCarrier"},[(0,t._)("rect",{id:"Icons",x:"-512",y:"-192",width:"1280",height:"800",style:{fill:"none"}}),(0,t._)("g",{id:"Icons1","serif:id":"Icons"},[(0,t._)("g",{id:"Strike"}),(0,t._)("g",{id:"H1"}),(0,t._)("g",{id:"H2"}),(0,t._)("g",{id:"H3"}),(0,t._)("g",{id:"list-ul"}),(0,t._)("g",{id:"hamburger-1"}),(0,t._)("g",{id:"hamburger-2"}),(0,t._)("g",{id:"list-ol"}),(0,t._)("g",{id:"list-task"}),(0,t._)("g",{id:"trash"}),(0,t._)("g",{id:"vertical-menu"}),(0,t._)("g",{id:"horizontal-menu"}),(0,t._)("g",{id:"sidebar-2"}),(0,t._)("g",{id:"Pen"}),(0,t._)("g",{id:"Pen1","serif:id":"Pen"}),(0,t._)("g",{id:"clock"}),(0,t._)("g",{id:"external-link"}),(0,t._)("g",{id:"hr"}),(0,t._)("g",{id:"info"}),(0,t._)("g",{id:"warning"}),(0,t._)("g",{id:"plus-circle"}),(0,t._)("g",{id:"minus-circle"}),(0,t._)("g",{id:"vue"}),(0,t._)("g",{id:"cog"}),(0,t._)("g",{id:"logo"}),(0,t._)("path",{id:"star",d:"M32.001,9.188l5.666,17.438l18.335,0l-14.833,10.777l5.666,17.438l-14.834,-10.777l-14.833,10.777l5.666,-17.438l-14.834,-10.777l18.335,0l5.666,-17.438Z"}),(0,t._)("g",{id:"radio-check"}),(0,t._)("g",{id:"eye-slash"}),(0,t._)("g",{id:"eye"}),(0,t._)("g",{id:"toggle-off"}),(0,t._)("g",{id:"shredder"}),(0,t._)("g",{id:"spinner--loading--dots-","serif:id":"spinner [loading, dots]"}),(0,t._)("g",{id:"react"}),(0,t._)("g",{id:"check-selected"}),(0,t._)("g",{id:"turn-off"}),(0,t._)("g",{id:"code-block"}),(0,t._)("g",{id:"user"}),(0,t._)("g",{id:"coffee-bean"}),(0,t._)("g",{id:"coffee-beans"},[(0,t._)("g",{id:"coffee-bean1","serif:id":"coffee-bean"})]),(0,t._)("g",{id:"coffee-bean-filled"}),(0,t._)("g",{id:"coffee-beans-filled"},[(0,t._)("g",{id:"coffee-bean2","serif:id":"coffee-bean"})]),(0,t._)("g",{id:"clipboard"}),(0,t._)("g",{id:"clipboard-paste"}),(0,t._)("g",{id:"clipboard-copy"}),(0,t._)("g",{id:"Layer1"})])],-1))),u=[g,m,_],h={class:"score"},f={class:"synopsis"},p={class:"episodes"};function v(e,i,s,n,g,m){const _=(0,t.up)("router-link"),v=(0,t.up)("v-btn");return(0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("img",{src:e.anime.images.jpg.large_image_url,alt:""},null,8,o),(0,t._)("div",d,[(0,t.Wm)(_,{to:{name:"anime",params:{id:e.anime.mal_id}}},{default:(0,t.w5)((()=>[(0,t._)("h1",null,(0,a.zw)(e.anime.title),1)])),_:1},8,["to"]),(0,t._)("div",l,[((0,t.wg)(),(0,t.iD)("svg",c,u)),(0,t._)("span",h,(0,a.zw)(e.anime.score),1)]),(0,t._)("p",f,(0,a.zw)(e.anime.synopsis),1),(0,t._)("span",p,"Episodes: "+(0,a.zw)(e.anime.episodes),1),e.isAnimeInFavorite?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(v,{key:0,color:"#9142b9",disabled:e.isAnimeInFavorite,onClick:i[0]||(i[0]=i=>e.addAnimeToFavorites())},{default:(0,t.w5)((()=>[(0,t.Uk)(" Add to favorites ")])),_:1},8,["disabled"])),e.isAnimeInFavorite?((0,t.wg)(),(0,t.j4)(v,{key:1,color:"red",disabled:!e.isAnimeInFavorite,onClick:i[1]||(i[1]=i=>e.deleteAnimeFromFavorites())},{default:(0,t.w5)((()=>[(0,t.Uk)(" Delete from favorites ")])),_:1},8,["disabled"])):(0,t.kq)("",!0)])])}var k=s(4161),w=s(65),A=(0,t.aZ)({props:["anime"],name:"AnimeCard",data(){return{isAnimeInFavorite:!1}},created(){this.checkAnimeInFavorite()},computed:{...(0,w.Se)(["userFavoriteAnimes","currentUser"])},methods:{...(0,w.OI)(["setUserAnimes"]),async addAnimeToFavorites(){try{const e=await k.Z.post("http://localhost:5000/users/anime",{userId:this.currentUser.id,animeId:this.anime.mal_id,title:this.anime.title},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.setUserAnimes(e.data),this.checkAnimeInFavorite()}catch(e){console.log(e.response)}},async deleteAnimeFromFavorites(){try{const e=await k.Z.delete(`http://localhost:5000/users/anime/${this.anime.mal_id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.setUserAnimes(e.data),this.checkAnimeInFavorite()}catch(e){console.log(e.response)}},checkAnimeInFavorite(){if(this.userFavoriteAnimes){let e=this.userFavoriteAnimes.find((e=>e.id===this.anime.mal_id));this.isAnimeInFavorite=!!e}}}}),b=s(89);const y=(0,b.Z)(A,[["render",v],["__scopeId","data-v-a4634156"]]);var I=y},5035:function(e,i,s){s.r(i),s.d(i,{default:function(){return m}});var t=s(3396);const a={key:1};function n(e,i,s,n,r,o){const d=(0,t.up)("v-progress-circular"),l=(0,t.up)("AnimeCard");return(0,t.wg)(),(0,t.iD)(t.HY,null,[e.isLoading?((0,t.wg)(),(0,t.j4)(d,{key:0,indeterminate:""})):(0,t.kq)("",!0),e.isResult?((0,t.wg)(),(0,t.iD)("div",a,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.animeList,(e=>((0,t.wg)(),(0,t.j4)(l,{key:e.mal_id,anime:e},null,8,["anime"])))),128))])):(0,t.kq)("",!0)],64)}s(7658);var r=s(4161),o=s(65),d=s(8054),l=(0,t.aZ)({components:{AnimeCard:d.Z},async mounted(){this.getUserAnimes()},data(){return{animeList:[],isResult:!1,isLoading:!0}},computed:(0,o.Se)(["currentUser"]),methods:{...(0,o.OI)(["setUserAnimes"]),async getUserAnimes(){try{const e=await r.Z.get(`http://localhost:5000/users/anime/${this.currentUser.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e.data.length>0&&this.setUserAnimes(e.data),e.data.forEach((async e=>{const i=await r.Z.get(`https://api.jikan.moe/v4/anime/${e.id}`).then((e=>e.data));i&&(console.log(i),this.animeList.push(i.data))})),this.isResult=!0,this.isLoading=!1}catch(e){alert(e.response.data.message)}}}}),c=s(89);const g=(0,c.Z)(l,[["render",n]]);var m=g}}]);
//# sourceMappingURL=35.4981d686.js.map